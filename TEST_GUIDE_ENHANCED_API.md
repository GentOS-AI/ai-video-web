# ğŸ§ª Enhanced API Testing Guide

## æµ‹è¯•ç¯å¢ƒå‡†å¤‡

### 1. åç«¯å¯åŠ¨

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
pip install -r requirements.txt

# è®¾ç½®ç¯å¢ƒå˜é‡
export OPENAI_API_KEY="your-openai-api-key"
export BASE_URL="http://localhost:8000"

# å¯åŠ¨åç«¯æœåŠ¡
uvicorn app.main:app --reload --port 8000
```

### 2. å‰ç«¯å¯åŠ¨

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm install
npm run dev
```

è®¿é—®: http://localhost:3000

## ğŸ“‹ æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•ç”¨ä¾‹ 1: æ— ç”¨æˆ·è¾“å…¥çš„æ ‡å‡†æ¨¡å¼
**ç›®çš„**: éªŒè¯é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨æ ‡å‡†API

**æ­¥éª¤**:
1. ä¸Šä¼ ä¸€å¼ äº§å“å›¾ç‰‡ï¼ˆJPG/PNGï¼Œå»ºè®® 1280x720ï¼‰
2. ä¸å¡«å†™ "Product Description" å’Œ "Advertising Intention"
3. ä¿æŒ Enhancement Mode ä¸º "Standard"
4. ä¸å‹¾é€‰ "Use enhanced AI processing"
5. ç‚¹å‡» "Enhance & Scripting"

**é¢„æœŸç»“æœ**:
- Console æ˜¾ç¤º: "ğŸ“ Using standard API"
- ç”ŸæˆåŸºç¡€è„šæœ¬
- è¿”å›å¯èƒ½æœ‰ optimized_image_url

---

### æµ‹è¯•ç”¨ä¾‹ 2: å¸¦äº§å“æè¿°çš„å¢å¼ºæ¨¡å¼
**ç›®çš„**: éªŒè¯ç”¨æˆ·è¾“å…¥è§¦å‘å¢å¼ºAPI

**æ­¥éª¤**:
1. ä¸Šä¼ ä¸€å¼ äº§å“å›¾ç‰‡
2. å¡«å†™ Product Description: "High-end wireless headphones with ANC"
3. ç•™ç©º Advertising Intention
4. ä¿æŒ Enhancement Mode ä¸º "Standard"
5. ç‚¹å‡» "Enhance & Scripting"

**é¢„æœŸç»“æœ**:
- Console æ˜¾ç¤º: "ğŸ“ Using ENHANCED API with user context"
- Console æ˜¾ç¤ºäº§å“æè¿°
- è¿”å›å¢å¼ºåçš„å›¾ç‰‡URL (enhanced_image_url)
- è¿”å›äº§å“åˆ†æ (product_analysis)
- ç”Ÿæˆçš„è„šæœ¬åŒ…å«äº§å“æè¿°ç›¸å…³å†…å®¹

---

### æµ‹è¯•ç”¨ä¾‹ 3: å®Œæ•´ç”¨æˆ·è¾“å…¥ + Professionalæ¨¡å¼
**ç›®çš„**: éªŒè¯å®Œæ•´åŠŸèƒ½

**æ­¥éª¤**:
1. ä¸Šä¼ äº§å“å›¾ç‰‡
2. å¡«å†™ Product Description: "Smart watch with health tracking"
3. å¡«å†™ Ad Intention: "Target fitness enthusiasts, emphasize health benefits"
4. é€‰æ‹© Enhancement Mode: "Professional"
5. ç‚¹å‡» "Enhance & Scripting"

**é¢„æœŸç»“æœ**:
- Console æ˜¾ç¤ºå®Œæ•´å‚æ•°
- å›¾ç‰‡å¢å¼ºæ•ˆæœæ›´å¼ºï¼ˆ+15% å¯¹æ¯”åº¦ç­‰ï¼‰
- è„šæœ¬é’ˆå¯¹å¥èº«çˆ±å¥½è€…å®šåˆ¶
- è¿”å›è¯¦ç»†çš„ enhancement_details

---

### æµ‹è¯•ç”¨ä¾‹ 4: Creativeæ¨¡å¼æµ‹è¯•
**ç›®çš„**: éªŒè¯åˆ›æ„å¢å¼ºæ¨¡å¼

**æ­¥éª¤**:
1. ä¸Šä¼ äº§å“å›¾ç‰‡
2. å¯é€‰å¡«å†™æè¿°
3. é€‰æ‹© Enhancement Mode: "Creative"
4. ç‚¹å‡» "Enhance & Scripting"

**é¢„æœŸç»“æœ**:
- å›¾ç‰‡å¢å¼ºæ•ˆæœæœ€å¼ºï¼ˆ+25% è‰²å½©é¥±å’Œåº¦ï¼‰
- è„šæœ¬é£æ ¼æ›´æœ‰åˆ›æ„
- Console æ˜¾ç¤º Enhancement Mode: creative

---

### æµ‹è¯•ç”¨ä¾‹ 5: å¼ºåˆ¶ä½¿ç”¨å¢å¼ºAPI
**ç›®çš„**: éªŒè¯checkboxåŠŸèƒ½

**æ­¥éª¤**:
1. ä¸Šä¼ äº§å“å›¾ç‰‡
2. ä¸å¡«å†™ä»»ä½•æè¿°
3. ä¿æŒStandardæ¨¡å¼
4. å‹¾é€‰ "Use enhanced AI processing"
5. ç‚¹å‡» "Enhance & Scripting"

**é¢„æœŸç»“æœ**:
- Console æ˜¾ç¤º: "Force Enhanced: true"
- ä½¿ç”¨å¢å¼ºAPIå³ä½¿æ²¡æœ‰ç”¨æˆ·è¾“å…¥

---

### æµ‹è¯•ç”¨ä¾‹ 6: é”™è¯¯å¤„ç†æµ‹è¯•
**ç›®çš„**: éªŒè¯é”™è¯¯å¤„ç†

**æµ‹è¯•åœºæ™¯**:
1. **æ— ç½‘ç»œè¿æ¥**: æ–­å¼€ç½‘ç»œï¼Œç‚¹å‡»ç”Ÿæˆ
   - é¢„æœŸ: æ˜¾ç¤ºç½‘ç»œé”™è¯¯æç¤º

2. **åç«¯æœªå¯åŠ¨**: å…³é—­åç«¯ï¼Œç‚¹å‡»ç”Ÿæˆ
   - é¢„æœŸ: æ˜¾ç¤ºæœåŠ¡ä¸å¯ç”¨æç¤º

3. **æ— æ•ˆçš„APIå¯†é’¥**: ä½¿ç”¨é”™è¯¯çš„OpenAI key
   - é¢„æœŸ: è¿”å›è®¤è¯é”™è¯¯

4. **è¶…å¤§å›¾ç‰‡**: ä¸Šä¼  > 20MB å›¾ç‰‡
   - é¢„æœŸ: å‰ç«¯éªŒè¯å¤±è´¥ï¼Œæ˜¾ç¤ºæ–‡ä»¶è¿‡å¤§æç¤º

---

## ğŸ” è°ƒè¯•æ£€æŸ¥ç‚¹

### Consoleæ—¥å¿—æ£€æŸ¥
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)ï¼ŒæŸ¥çœ‹Consoleè¾“å‡ºï¼š

1. **APIé€‰æ‹©æ—¥å¿—**:
   ```
   ğŸ“ Using ENHANCED API with user context
     Product Description: ...
     Ad Intention: ...
     Enhancement Mode: ...
   ```

2. **è¿”å›æ•°æ®æ—¥å¿—**:
   ```
   âœ… Script generated: {...}
   ğŸ–¼ï¸ Enhanced image received: ...
   ğŸ“Š Product Analysis: {...}
   ğŸ¨ Enhancement Details: {...}
   ```

3. **é”™è¯¯æ—¥å¿—**:
   ```
   âŒ Script generation failed: ...
   ```

### Networkæ£€æŸ¥
åœ¨å¼€å‘è€…å·¥å…·çš„Networkæ ‡ç­¾ä¸­æŸ¥çœ‹ï¼š

1. **å¢å¼ºAPIè¯·æ±‚**:
   - URL: `http://localhost:8000/api/v1/ai/enhance-and-script`
   - Method: POST
   - Form Data åŒ…å«:
     - file (äºŒè¿›åˆ¶)
     - product_description (å¦‚æœæœ‰)
     - ad_intention (å¦‚æœæœ‰)
     - enhancement_mode
     - duration
     - language

2. **æ ‡å‡†APIè¯·æ±‚**:
   - URL: `http://localhost:8000/api/v1/ai/generate-script`
   - Method: POST

### åç«¯æ—¥å¿—æ£€æŸ¥
æŸ¥çœ‹åç«¯ç»ˆç«¯è¾“å‡ºï¼š

```
========================================
ğŸš€ [ENHANCED AI SERVICE] Request Start
ğŸ“¥ Input Data:
  - User ID: 1
  - File: product.jpg
  - Product Description: ...
  - Ad Intention: ...
  - Enhancement Mode: professional
========================================
```

## ğŸ“Š æ€§èƒ½åŸºå‡†

### é¢„æœŸå¤„ç†æ—¶é—´:
- **æ ‡å‡†æ¨¡å¼**: 2-4 ç§’
- **Professionalæ¨¡å¼**: 3-5 ç§’
- **Creativeæ¨¡å¼**: 3-6 ç§’

### å›¾ç‰‡å¤§å°å˜åŒ–:
- åŸå§‹: 2-5 MB
- å¢å¼ºå: 1.5-3 MB (å‹ç¼©ä¼˜åŒ–)

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æç¤º "Subscription required"
**A**: ç¡®ä¿æµ‹è¯•è´¦æˆ·æœ‰æœ‰æ•ˆè®¢é˜…ï¼Œæˆ–åœ¨åç«¯ä¸´æ—¶ç¦ç”¨è®¢é˜…æ£€æŸ¥

### Q2: OpenAI APIé”™è¯¯
**A**: æ£€æŸ¥ OPENAI_API_KEY ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®

### Q3: å›¾ç‰‡ä¸Šä¼ å¤±è´¥
**A**:
- æ£€æŸ¥å›¾ç‰‡æ ¼å¼ (JPG/PNG)
- æ£€æŸ¥å›¾ç‰‡å°ºå¯¸ (æ¨è 1280x720)
- æ£€æŸ¥æ–‡ä»¶å¤§å° (< 20MB)

### Q4: å¢å¼ºå›¾ç‰‡ä¸æ˜¾ç¤º
**A**:
- æ£€æŸ¥åç«¯ UPLOAD_DIR æƒé™
- æ£€æŸ¥ BASE_URL é…ç½®
- æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ä¸­çš„ enhanced_image_url

## âœ… éªŒæ”¶æ ‡å‡†

1. **åŠŸèƒ½å®Œæ•´æ€§**:
   - [ ] ç”¨æˆ·è¾“å…¥æ­£ç¡®ä¼ é€’åˆ°åç«¯
   - [ ] å¢å¼ºæ¨¡å¼åˆ‡æ¢æ­£å¸¸å·¥ä½œ
   - [ ] å›¾ç‰‡å¢å¼ºæ•ˆæœå¯è§
   - [ ] è„šæœ¬è´¨é‡æœ‰æ˜æ˜¾æå‡

2. **ç”¨æˆ·ä½“éªŒ**:
   - [ ] åŠ è½½çŠ¶æ€æ˜¾ç¤ºæ­£ç¡®
   - [ ] é”™è¯¯æç¤ºå‹å¥½
   - [ ] å“åº”æ—¶é—´ < 6ç§’
   - [ ] UIäº¤äº’æµç•…

3. **æ—¥å¿—å®Œæ•´æ€§**:
   - [ ] å‰ç«¯Consoleæ—¥å¿—æ¸…æ™°
   - [ ] åç«¯æ—¥å¿—è¯¦ç»†
   - [ ] é”™è¯¯å¯è¿½è¸ª

## ğŸ“ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
## æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•æ—¥æœŸ**: 2025-10-19
**æµ‹è¯•äººå‘˜**: [å§“å]
**ç¯å¢ƒ**: Development

### æµ‹è¯•ç»“æœæ±‡æ€»
- æµ‹è¯•ç”¨ä¾‹é€šè¿‡: X/6
- å‘ç°é—®é¢˜: Xä¸ª
- æ€§èƒ½è¾¾æ ‡: æ˜¯/å¦

### è¯¦ç»†ç»“æœ
| æµ‹è¯•ç”¨ä¾‹ | çŠ¶æ€ | å¤‡æ³¨ |
|---------|------|------|
| ç”¨ä¾‹1 | âœ… | |
| ç”¨ä¾‹2 | âœ… | |
| ç”¨ä¾‹3 | âš ï¸ | å“åº”æ—¶é—´åé•¿ |
| ... | | |

### é—®é¢˜è®°å½•
1. é—®é¢˜æè¿°...
2. å¤ç°æ­¥éª¤...
3. æœŸæœ›è¡Œä¸º...

### å»ºè®®æ”¹è¿›
- ...
```

---

## è”ç³»æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. å®Œæ•´çš„Consoleæ—¥å¿—
2. Networkè¯·æ±‚æˆªå›¾
3. åç«¯æ—¥å¿—è¾“å‡º
4. æµ‹è¯•æ­¥éª¤æè¿°